!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).GitHubClient=e()}(this,(function(){"use strict";class t{constructor(t){this.client=t}listPullRequests(t){const{full_name:e,...s}=t,o={...s,uri:this.client.buildURL(`/repos/${e}/pulls`),method:"GET"};return this.client.makeRequest(o)}async listAllPullRequest(t,e=[]){const s=await this.listPullRequests(t);if(e.push(...s),s.length>0){const{qs:s,...o}=t,{page:i=1}=s;return await this.listAllPullRequest({...o,qs:{...s,page:i+1}},e)}return e}getComments(t){const{full_name:e,number:s,...o}=t,i={...o,uri:this.client.buildURL(`/repos/${e}/pulls/${s}/comments`),method:"GET"};return this.client.makeRequest(i)}getDetails(t){const{full_name:e,number:s,...o}=t,i={...o,uri:this.client.buildURL(`/repos/${e}/pulls/${s}`),method:"GET"};return this.client.makeRequest(i)}}return class{constructor(e){if(!e.host)throw new Error("NO_HOST_ERROR");if(!e.token)throw new Error("NO_TOKEN_ERROR");this.host=e.host,this.port=e.port,this.token=e.token,this.protocol=e.protocol||"https",this.apiVersion=e.apiVersion||"v3",this.path_prefix=e.path_prefix?e.path_prefix:"/",this.promise=e.promise||Promise,this.repository=new t(this)}buildURL(t,e){const s=this.path_prefix+"api/"+(e||this.apiVersion)+t,{protocol:o,host:i}=this;return decodeURIComponent(`${o}://${i}${s}`)}async makeRequest(t){const e={method:t.method||"GET",headers:{Authorization:"token "+this.token,...t.headers}};if(t.qs){const s=Object.keys(t.qs).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(t.qs[e])).join("&");e.uri=`${t.uri}?${s}`}t.body&&(e.body=JSON.stringify(t.body));const{uri:s,...o}=e;try{const t=await fetch(s,o),e=await t.json();return Promise.resolve(e)}catch(t){return Promise.reject(t)}}}}));
